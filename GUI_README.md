# 消息违规检测系统 - GUI管理界面

## 项目简介

这是一个基于PyQt5开发的桌面管理界面，用于管理消息违规检测系统的所有功能。系统支持关键词管理、实时消息监控、违规内容检测等功能。

## 功能特性

### 1. 关键词管理
- ✅ 添加/删除关键词
- ✅ 批量导入/导出关键词
- ✅ 关键词列表显示
- ✅ 清空所有关键词

### 2. 消息检测监控
- ✅ 实时监控抖音客服消息
- ✅ 多算法违规检测（精确匹配、正则表达式、模糊匹配）
- ✅ 检测结果实时显示
- ✅ 支持启动/停止监控

### 3. 系统状态监控
- ✅ 系统信息显示
- ✅ 实时日志记录
- ✅ 数据库状态监控
- ✅ 匹配器状态显示

## 安装和运行

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 运行GUI界面

```bash
python run_gui.py
```

或者直接运行主程序：

```bash
python main_window.py
```

## 使用说明

### 关键词管理

1. **添加关键词**：
   - 在"关键词"输入框中输入要添加的关键词
   - 点击"添加"按钮或按回车键

2. **删除关键词**：
   - 在关键词列表中选择要删除的关键词
   - 点击"删除选中"按钮

3. **批量导入**：
   - 点击"导入文件"按钮
   - 选择包含关键词的文本文件（每行一个关键词）

4. **导出关键词**：
   - 点击"导出文件"按钮
   - 选择保存位置和文件名

### 消息检测

1. **设置URL**：
   - 在URL输入框中输入抖音客服系统地址
   - 点击"设置URL"按钮

2. **开始监控**：
   - 点击"开始监控"按钮
   - 系统将自动获取用户消息并进行违规检测

3. **查看结果**：
   - 检测结果会实时显示在结果表格中
   - 包含时间、用户、消息内容和匹配结果

### 系统状态

- 查看关键词数量
- 监控匹配器状态
- 查看数据库连接状态
- 查看系统日志

## 技术架构

### 核心组件

1. **KeywordManagerWidget**: 关键词管理组件
2. **MessageDetectionWidget**: 消息检测组件
3. **SystemStatusWidget**: 系统状态组件
4. **MessageDetectionThread**: 消息检测线程

### 技术栈

- **PyQt5**: GUI框架
- **SQLite**: 数据库存储
- **Aho-Corasick**: 多模式字符串匹配
- **RapidFuzz**: 模糊字符串匹配
- **DrissionPage**: 浏览器自动化

## 配置说明

系统配置文件位于 `config.py`，包含以下配置项：

- 数据库路径
- 匹配器保存路径
- 默认抖音URL
- 检测间隔时间
- 界面配置
- 正则表达式模式

## 注意事项

1. **首次运行**：
   - 确保已安装所有依赖包
   - 检查数据库文件是否存在
   - 确保网络连接正常

2. **URL设置**：
   - 需要有效的抖音客服系统URL
   - 确保有相应的访问权限

3. **性能优化**：
   - 大量关键词时建议分批导入
   - 监控过程中避免频繁操作界面

4. **数据安全**：
   - 定期备份关键词数据
   - 注意保护敏感信息

## 故障排除

### 常见问题

1. **启动失败**：
   - 检查Python版本（建议3.7+）
   - 确认所有依赖包已正确安装

2. **数据库错误**：
   - 检查数据库文件路径
   - 确认文件权限正确

3. **检测失败**：
   - 检查网络连接
   - 确认URL地址正确
   - 查看系统日志获取详细错误信息

### 日志查看

系统日志会显示在"系统状态"标签页中，包含：
- 系统启动信息
- 错误和警告信息
- 操作记录

## 更新日志

### v1.0.0
- 初始版本发布
- 支持关键词管理
- 支持消息检测监控
- 支持系统状态显示

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交Issue
- 发送邮件
- 项目讨论区
